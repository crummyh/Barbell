{% extends "dashboard.html" %} {% block dashboard %}
<div class="container-fluid">
    <div class="row gx-4 mt-2">
        <div class="col-xl-6 mb-xl-4">
            <div
                class="bg-body-secondary rounded full-dash-height mb-4 mb-xl-0"
            >
                <div class="p-4">
                    <h2>Download Request</h2>
                    <form>
                        <div class="mb-3">
                            <label for="countInput" class="form-label"
                                >Image Count</label
                            >
                            <input
                                type="number"
                                class="form-control"
                                id="countInput"
                                aria-describedby="countHelp"
                                onkeypress="return isNumber(event)"
                            />
                            <div class="form-text" id="countHelp">
                                Max of 10,000 images
                            </div>
                        </div>
                        <div class="mb-3 form-check">
                            <input
                                type="checkbox"
                                class="form-check-input"
                                id="nonMatchCheck"
                                checked
                            />
                            <label for="nonMatchCheck" class="form-check-label"
                                >Allow non-match images<a
                                    href="#"
                                    class="ms-1 text-decoration-none"
                                    data-bs-toggle="tooltip"
                                    data-bs-title="Allow download of images not from official matches. Very useful early in the season."
                                >
                                    <iconify-icon
                                        icon="bi:info-circle-fill"
                                        width="16"
                                        height="16"
                                    ></iconify-icon></a
                            ></label>
                        </div>
                        <div class="mb-3">
                            <h4>Annotations</h4>
                            <div
                                id="annotationTreeView"
                                class="annotation-tree"
                            ></div>
                            <div id="selectedLabelsTitle">
                                0 Labels selected:
                            </div>
                            <pre
                                id="selectedLabels"
                                class="border rounded p-2 bg-body"
                            >
[]</pre
                            >
                        </div>
                        <div class="d-grid">
                            <button
                                class="btn btn-primary"
                                type="button"
                                id="openDownloadModal"
                            >
                                Start Download
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-xl-6">
            <div class="bg-body-secondary rounded full-dash-height">
                <div class="p-4">
                    <h2>Download History</h2>
                    <div
                        class="table-container table-responsive max-size-table"
                    >
                        <table
                            class="table table-hover tertiary-table"
                            class="batchTable"
                        >
                            <thead class="sticky-top bg-body-secondary">
                                <th scope="col">
                                    UUID<span
                                        data-bs-toggle="tooltip"
                                        data-bs-title="UUID is shortened here. Make sure to click the copy button!"
                                        ><iconify-icon
                                            icon="bi:info-circle-fill"
                                            width="16"
                                            height="16"
                                            class="ms-2"
                                        ></iconify-icon
                                    ></span>
                                </th>
                                <th scope="col">Status</th>
                                <th scope="col">Image Count</th>
                                <th scope="col">Start Time</th>
                            </thead>
                            <tbody id="downloadBatchTableBody">
                                <tr
                                    data-bs-toggle="collapse"
                                    data-bs-target="#row0"
                                    class="clickable"
                                >
                                    <td class="uuid-cell">
                                        <a
                                            href="#"
                                            data-bs-toggle="tooltip"
                                            data-bs-title="opinaf983wna98"
                                            class="text-decoration-none"
                                            id="id0"
                                            >as89het</a
                                        ><button
                                            class="btn btn-sm btn-link p-0 ms-2 border-0"
                                            onclick="copyID(0, event)"
                                            type="button"
                                        >
                                            <iconify-icon
                                                id="copyIcon0"
                                                icon="bi:clipboard-fill"
                                                width="16"
                                                height="16"
                                            ></iconify-icon>
                                        </button>
                                    </td>
                                    <td>
                                        <span class="badge bg-success"
                                            >Ready</span
                                        >
                                    </td>
                                    <td class="">12,345</td>
                                    <td>2025-08-11 14:32</td>
                                </tr>
                                <tr>
                                    <td colspan="5" class="p-0">
                                        <div class="collapse" id="row0">
                                            <div class="p-3">
                                                <strong>Hash:</strong> 89f...ab1
                                                <br />
                                                <strong>Annotations:</strong>
                                                [...long list...] <br />
                                                <strong>Error:</strong> None
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div
    class="modal fade"
    id="confirmDownloadModal"
    tabindex="-1"
    aria-labelledby="confirmDownloadModalLabel"
    aria-hidden="true"
>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="confirmDownloadModalLabel">
                    Confirm Download
                </h1>
                <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                ></button>
            </div>
            <div class="modal-body">
                Are you <strong>sure</strong> you want to start this download?
                There is <strong>no</strong> way to stop it.
            </div>
            <div class="modal-footer">
                <button
                    type="button"
                    class="btn btn-secondary"
                    data-bs-dismiss="modal"
                >
                    No
                </button>
                <button
                    type="button"
                    class="btn btn-primary"
                    id="confirmDownloadBtn"
                >
                    Yes
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}
